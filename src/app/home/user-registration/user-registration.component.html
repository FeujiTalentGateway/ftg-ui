<app-header></app-header>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card login-card shadow p-3 rounded">
        <div class="card-body">
          <h2 class="global-color text-center">SIGN UP</h2>
          <form
            [formGroup]="registerForm"
            (ngSubmit)="
              registerForm.status !== 'INVALID' && register(registerForm)
            "
            class="form-container"
          >
            <div class="form-group no-border">
              <label for="firstName" class="form-label"
                ><i class="far fa-user"></i
              ></label>
              <input
                type="text"
                class="form-control input-fields"
                id="firstName"
                placeholder="First Name"
                formControlName="firstName"
              />
              <div
                *ngIf="
                  getControl('firstName')?.errors &&
                  getControl('firstName')?.touched
                "
              >
                <span
                  class="text-danger"
                  *ngIf="getControl('firstName')?.errors?.['required']"
                  >First name is required.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('firstName')?.errors?.['pattern']"
                  >Invalid first name.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('firstName')?.errors?.['maxlength']"
                  >Only 32 characters are allowed.
                </span>
              </div>
            </div>
            <div class="form-group no-border">
              <label for="lastName" class="form-label"
                ><i class="far fa-user"></i
              ></label>
              <input
                type="text"
                class="form-control input-fields"
                id="lastName"
                placeholder="Last Name"
                formControlName="lastName"
              />
              <div
                *ngIf="
                  getControl('lastName')?.errors &&
                  getControl('lastName')?.touched
                "
              >
                <span
                  class="text-danger"
                  *ngIf="getControl('lastName')?.errors?.['required']"
                  >Last name is required.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('lastName')?.errors?.['pattern']"
                  >Invalid last name.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('lastName')?.errors?.['maxlength']"
                  >Only 32 characters are allowed.
                </span>
              </div>
            </div>
            <div class="form-group no-border">
              <label for="email" class="form-label"
                ><i class="far fa-envelope"></i
              ></label>
              <input
                type="email"
                class="form-control input-fields"
                id="email"
                placeholder="Email"
                formControlName="email"
              />
              <div
                *ngIf="
                  getControl('email')?.errors && getControl('email')?.touched
                "
              >
                <span
                  class="text-danger"
                  *ngIf="getControl('email')?.errors?.['required']"
                  >Email is required.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('email')?.errors?.['maxlength']"
                  >Only 32 characters are allowed.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('email')?.errors?.['pattern']"
                  >Please enter a valid email.
                </span>
              </div>
            </div>
            <div class="form-group no-border">
              <label for="userName" class="form-label"
                ><i class="far fa-user"></i
              ></label>
              <input
                type="text"
                class="form-control input-fields"
                id="userName"
                placeholder="Username"
                formControlName="userName"
              />
              <div
                *ngIf="
                  getControl('userName')?.errors &&
                  getControl('userName')?.touched
                "
              >
                <span
                  class="text-danger"
                  *ngIf="getControl('userName')?.errors?.['required']"
                  >Username is required.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('userName')?.errors?.['invalidUsername']"
                  >First 4 letters should only be letters.
                </span>
                <span
                  class="text-danger"
                  *ngIf="getControl('userName')?.errors?.['minlength'] || getControl('userName')?.errors?.['maxlength']"
                  >Username should be between 8 and 20 characters.
                </span>
              </div>
            </div>
            <div class="form-group no-border">
              <label for="password" class="form-label img"
                ><img
                  src="../../../assets/images/lock_outline_black_18dp.svg"
                  alt=""
                  srcset=""
              /></label>
              <input
                [type]="passwordVisible ? 'text' : 'password'"
                class="form-control input-fields"
                id="password"
                placeholder="Password"
                formControlName="password"
                [ngClass]="{
                  error:
                    getControl('password')?.errors &&
                    getControl('password')?.touched
                }"
              />
              <i
                class="fa-solid {{
                  passwordVisible ? 'fa-eye-slash' : 'fa-eye'
                }}"
                id="eye"
                (click)="passwordVisibility()"
              ></i>
            </div>

            <div
              class="password-fields"
              *ngIf="
                getControl('password')?.errors &&
                getControl('password')?.touched
              "
            >
              <span
                class="text-danger"
                *ngIf="getControl('password')?.hasError('required')"
                >Password is required.
              </span>
              <span
                class="text-danger"
                *ngIf="
                  getControl('password')?.hasError('maxlength') ||
                  getControl('password')?.hasError('minlength')
                "
                >Password should be between 8 and 32 characters long.
              </span>
            </div>

            <div class="form-group no-border">
              <label for="confirmPassword" class="form-label img"
                ><img
                  src="../../../assets/images/lock_outline_black_18dp.svg"
                  alt=""
                  srcset=""
              /></label>
              <input
                [type]="passwordVisible ? 'text' : 'password'"
                class="form-control input-fields"
                id="confirmPassword"
                placeholder="Confirm Password"
                formControlName="confirmPassword"
                [ngClass]="{
                  error:
                    getControl('confirmPassword')?.errors &&
                    getControl('confirmPassword')?.touched
                }"
              />
              <i
                class="fa-solid {{
                  confirmPasswordVisible ? 'fa-eye-slash' : 'fa-eye'
                }}"
                id="eye"
                (click)="confirmPasswordVisibility()"
              ></i>
            </div>
            <div
              class="password-fields"
              *ngIf="
                getControl('confirmPassword')?.errors &&
                getControl('confirmPassword')?.touched
              "
            >
              <span
                class="text-danger"
                *ngIf="getControl('confirmPassword')?.hasError('required')"
                >Confirm Password is required.
              </span>
            </div>
            <div
              *ngIf="
                registerForm.hasError('passwordMismatch') &&
                getControl('confirmPassword')?.touched
              "
            >
              <span class="text-danger">Passwords do not match. </span>
            </div>
            <button
              class="button reg-btn global-background-color"
              type="submit"
              [class.disabled-button]="registerForm.invalid"
            >
              Register
            </button>
            <div class="login-link globar-color text-center">
              Already have an account?
              <a [routerLink]="['/main/login']"
                ><span class="global-color"> Login</span></a
              >
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
