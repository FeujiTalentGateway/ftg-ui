<div class="container-fluid main-div">
  <!-- Header -->
  <div class="d-flex align-item-center justify-content-around flex-dir-column header">
    <div>
      <select id="subject" class="form-select select header-child" [(ngModel)]="selectedLevel"
        (change)="handleFiltering()">
        <option value="0" disabled selected>Difficulty level</option>
        <option *ngFor="let difficultyLevel of [].constructor(10); let i = index">
          {{ i + 1 }}
        </option>
      </select>
    </div>

    <input type="text" [(ngModel)]="searchQuery" placeholder="Search questions" class="styled-input header-child"
      (input)="handleSearchInput($event)" />
  </div>
  <!-- Header End -->

  <div class="coding-questions" *ngIf="codingQuestionData.length > 0; else noQuestionsMessage">
    <div class="question-list">
      <!-- Questions list -->
      <div class="row d-flex align-items-center justify-content-center"
        *ngFor="let question of codingQuestionData; let i = index">
        <div class="card shadow rounded p-3">
          <details class="question-details" [open]="isExpanded[i]">
            <summary>
              <div class="card-body">
                <div class="content">
                  <span [ngClass]="{
                      collapsed: !isExpanded[i],
                      expanded: isExpanded[i]
                    }" (click)="toggle(i)">
                    Q. {{ i + 1 }} &nbsp;&nbsp;{{ question.content }} &nbsp;
                  </span>
                </div>
              </div>
            </summary>
            <div class="details-body">
              <div class="dropdown">Level: {{ question.difficultLevel }}</div>
              <p><strong>Description:</strong> {{ question.description }}</p>
              <div class="constraints">
                <p><strong>Constraints:</strong></p>
                <ul>
                  <li *ngFor="let constraint of question.constraints">
                    {{ constraint.constraint }}
                  </li>
                </ul>
              </div>
              <div class="test-cases">
                <p><strong>Test Cases:</strong></p>
                <div *ngFor="let testCase of question.testCases" class="test-case">
                  <p>
                    <strong>Expected Result:</strong>
                    {{ testCase.expectedResult }}
                  </p>
                  <p>
                    <strong>Explanation:</strong>
                    {{ testCase.explanationExample }}
                  </p>
                  <div *ngFor="let input of testCase.inputArguments" class="input-argument">
                    <p><strong>Input Value:</strong> {{ input.inputValue }}</p>
                  </div>
                </div>
              </div>

              <div class="method-definition">
                <div>
                  <p>
                    <strong>Method Name:</strong>
                    {{ question.methodDefinition.methodName }}
                  </p>
                  <div class="method-arguments">
                    <table class="arguments-table">
                      <thead>
                        <tr>
                          <th>Argument Name</th>
                          <th>Primitive Data Type</th>
                          <th>Collection Data Type</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="
                            let arg of question.methodDefinition.methodArguments
                          " class="test-case">
                          <td>{{ arg.argumentName }}</td>
                          <td>{{ arg.primitiveDataType.commonDataType }}</td>
                          <td *ngIf="arg.isCollection">
                            {{ arg.collectionDataType.commonDataType }}
                          </td>
                          <td *ngIf="!arg.isCollection">-</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <ng-container *ngIf="question.methodDefinition.isCollectionType">
                    <p>
                      <strong>Return Type:</strong> Collection of
                      {{
                        question.methodDefinition.collectionReturnType
                          ?.commonDataType
                      }}
                    </p>
                  </ng-container>
                  <ng-container *ngIf="!question.methodDefinition.isCollectionType">
                    <p>
                      <strong>Return Type:</strong>
                      {{
                        question.methodDefinition.primitiveReturnType
                          .commonDataType
                      }}
                    </p>
                  </ng-container>
                </div>
              </div>
            </div>
          </details>
        </div>
      </div>
      <!-- Questions list End -->

      <!-- Pagination Component -->
      <div class="pagination-container">
        <mat-paginator [length]="questionsLength" [pageSize]="rows" [pageSizeOptions]="[5, 10, 15, 20, 25]"
          (page)="onPageChange($event)"></mat-paginator>
      </div>
      <!--  Pagination Component End-->
    </div>
  </div>

  <!-- 404 Error   -->
  <ng-template #noQuestionsMessage>
    <div class="d-flex align-items-center justify-content-center oops">
      <img src="../../../../assets/images/oops.svg" alt="No Questions" />
    </div>
  </ng-template>
</div>
